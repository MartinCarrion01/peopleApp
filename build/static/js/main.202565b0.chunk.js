(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{44:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(19),u=n.n(c),o=n(10),s=n(2),i=n.n(s),b=n(4),l=n(5),d=n(0),p=function(e){var t=e.text;return Object(d.jsx)("h1",{children:t})},f=function(e){var t=e.person,n=e.deleter;return Object(d.jsxs)("div",{children:[Object(d.jsxs)("p",{children:[t.name," ",t.number]}),Object(d.jsx)("button",{onClick:n,children:"Delete"})]})},j=function(e){var t=e.people,n=e.deleter;return Object(d.jsx)("div",{children:t.map((function(e){return Object(d.jsx)(f,{person:e,deleter:function(){return n(e.id)}},e.number)}))})},m=function(e){var t=e.onSubmit,n=e.newName,r=e.onNameChange,a=e.newNumber,c=e.onNumberChange;return Object(d.jsxs)("form",{onSubmit:t,children:[Object(d.jsx)("label",{children:"Name: "}),Object(d.jsx)("input",{value:n,onChange:r}),Object(d.jsx)("br",{}),Object(d.jsx)("label",{children:"Phone-number"}),Object(d.jsx)("input",{value:a,onChange:c}),Object(d.jsx)("br",{}),Object(d.jsx)("button",{type:"submit",children:"Save"})]})},h=n(6),O=n.n(h),x="/api/people",v={getAll:function(){var e=Object(b.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get(x);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),save:function(){var e=Object(b.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.post(x,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),delete:function(){var e=Object(b.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.delete("".concat(x,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(b.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.put("".concat(x,"/").concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},w=v,g={ok:{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},fail:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10}},y=function(e){var t=e.message,n=e.style;return null===t?null:Object(d.jsx)("div",{style:n,children:t})},k=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)("type a new name"),u=Object(l.a)(c,2),s=u[0],f=u[1],h=Object(r.useState)("type new number"),O=Object(l.a)(h,2),x=O[0],v=O[1],k=Object(r.useState)(""),S=Object(l.a)(k,2),N=S[0],C=S[1],B=Object(r.useState)(null),D=Object(l.a)(B,2),z=D[0],A=D[1],E=Object(r.useState)({}),J=Object(l.a)(E,2),L=J[0],P=J[1],R=function(){var e=Object(b.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getAll();case 2:t=e.sent,a(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){R()}),[]);var I,M=function(e,t){A(e),P(t),setTimeout((function(){A(null),P({})}),5e3)},T=function(){var e=Object(b.a)(i.a.mark((function e(t){var r,c,u,b,l,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=function(){f("type a new name"),v("type new number")},!(c=n.find((function(e){return e.name===s})))){e.next=13;break}if(!window.confirm("".concat(c.name," has already been added to the phonebook, do you want to replace the old number by the new number?"))){e.next=11;break}return u=Object(o.a)(Object(o.a)({},c),{},{number:x}),e.next=8,w.update(u.id,u);case 8:b=e.sent,a(n.map((function(e){return e.id!==u.id?e:b}))),M("".concat(b.name,"'s number updated succesfully"),g.ok);case 11:return r(),e.abrupt("return");case 13:return l={name:s,number:x},e.next=16,w.save(l);case 16:d=e.sent,a(n.concat(d)),r(),M("".concat(d.name," has been added succesfully"),g.ok);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(b.a)(i.a.mark((function e(t){var r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.find((function(e){return e.id===t})),!window.confirm("Do you really want to delete ".concat(r.name,"?"))){e.next=7;break}return e.next=4,w.delete(t);case 4:c=e.sent,console.log("result",c),a(n.filter((function(e){return e.id!==t})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{children:[Object(d.jsx)(p,{text:"Phonebook"}),Object(d.jsx)("input",{value:N,onChange:function(e){C(e.target.value)}}),Object(d.jsx)(y,{message:z,style:L}),Object(d.jsx)(m,{onSubmit:T,newName:s,onNameChange:function(e){f(e.target.value)},newNumber:x,onNumberChange:function(e){v(e.target.value)}}),Object(d.jsx)(p,{text:"Numbers"}),(""!==N.trim()?0!==(I=n.filter((function(e){return e.name.toLowerCase().includes(N.toLowerCase())}))).length:(I=n,1))?Object(d.jsx)(j,{people:I,deleter:q}):"Not found"]})};u.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(k,{})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.202565b0.chunk.js.map