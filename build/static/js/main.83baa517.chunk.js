(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{44:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(19),u=n.n(c),o=n(10),i=n(2),s=n.n(i),l=n(4),b=n(5),d=n(0),f=function(e){var t=e.text;return Object(d.jsx)("h1",{children:t})},p=function(e){var t=e.person,n=e.deleter;return Object(d.jsxs)("div",{children:[Object(d.jsxs)("p",{children:[t.name," ",t.number]}),Object(d.jsx)("button",{onClick:n,children:"Delete"})]})},j=function(e){var t=e.people,n=e.deleter;return Object(d.jsx)("div",{children:t.map((function(e){return Object(d.jsx)(p,{person:e,deleter:function(){return n(e.id)}},e.number)}))})},m=function(e){var t=e.onSubmit,n=e.newName,r=e.onNameChange,a=e.newNumber,c=e.onNumberChange;return Object(d.jsxs)("form",{onSubmit:t,children:[Object(d.jsx)("label",{children:"Name: "}),Object(d.jsx)("input",{value:n,onChange:r}),Object(d.jsx)("br",{}),Object(d.jsx)("label",{children:"Phone-number"}),Object(d.jsx)("input",{value:a,onChange:c}),Object(d.jsx)("br",{}),Object(d.jsx)("button",{type:"submit",children:"Save"})]})},h=n(6),O=n.n(h),v="/api/people",x={getAll:function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get(v);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),save:function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.post(v,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),delete:function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.delete("".concat(v,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(l.a)(s.a.mark((function e(t,n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.put("".concat(v,"/").concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},w=x,g={ok:{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},fail:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10}},y=function(e){var t=e.message,n=e.style;return null===t?null:Object(d.jsx)("div",{style:n,children:t})},k=function(e){var t=e.filter,n=e.filterHandler;return Object(d.jsx)("div",{children:Object(d.jsx)("input",{value:t,onChange:n})})},S=function(){var e=Object(r.useState)([]),t=Object(b.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)("type a new name"),u=Object(b.a)(c,2),i=u[0],p=u[1],h=Object(r.useState)("type new number"),O=Object(b.a)(h,2),v=O[0],x=O[1],S=Object(r.useState)(""),N=Object(b.a)(S,2),C=N[0],B=N[1],D=Object(r.useState)(null),z=Object(b.a)(D,2),A=z[0],E=z[1],H=Object(r.useState)({}),J=Object(b.a)(H,2),L=J[0],P=J[1],R=function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getAll();case 2:t=e.sent,a(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){R()}),[]);var I,M=function(e,t){E(e),P(t),setTimeout((function(){E(null),P({})}),5e3)},T=function(){var e=Object(l.a)(s.a.mark((function e(t){var r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.find((function(e){return e.id===t})),!window.confirm("Do you really want to delete ".concat(r.name,"?"))){e.next=7;break}return e.next=4,w.delete(t);case 4:c=e.sent,console.log("result",c),a(n.filter((function(e){return e.id!==t})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{children:[Object(d.jsx)(f,{text:"Phonebook"}),Object(d.jsx)(k,{filter:C,filterHandler:function(e){B(e.target.value)}}),Object(d.jsx)(y,{message:A,style:L}),Object(d.jsx)(m,{onSubmit:function(e){e.preventDefault();var t=function(){p("type a new name"),x("type new number")},r=n.find((function(e){return e.name===i}));if(r){if(window.confirm("".concat(r.name," has already been added to the phonebook, do you want to replace the old number by the new number?"))){var c=Object(o.a)(Object(o.a)({},r),{},{number:v});w.update(c.id,c).then((function(e){a(n.map((function(t){return t.id!==c.id?t:e}))),M("".concat(e.name,"'s number updated succesfully"),g.ok)}))}t()}else{var u={name:i,number:v};w.save(u).then((function(e){a(n.concat(e)),t(),M("".concat(e.name," has been added succesfully"),g.ok)})).catch((function(e){console.log("error responde deata",e.response.data),M(e.response.data.error,g.fail),t()}))}},newName:i,onNameChange:function(e){p(e.target.value)},newNumber:v,onNumberChange:function(e){x(e.target.value)}}),Object(d.jsx)(f,{text:"Numbers"}),(""!==C.trim()?0!==(I=n.filter((function(e){return e.name.toLowerCase().includes(C.toLowerCase())}))).length:(I=n,1))?Object(d.jsx)(j,{people:I,deleter:T}):"Not found"]})};u.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(S,{})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.83baa517.chunk.js.map